<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <script>
        $(document).ready(function () {
            $('input:file').change(function () {
                if ($(this).val()) {
                    $('button:submit').attr('disabled', false);
                }
            });
        });
    </script>
    <script type="text/javascript">
        $(function () {
            $('button[type=submit]')
                .click(
                    function (e) {
                        e.preventDefault();
                        $(this).prop('disabled', true);

                        var form = document.forms[0];
                        var formData = new FormData(form);

                        var ajaxReq = $
                            .ajax({
                                url: 'http://localhost:92/upload/csv',
                                type: 'POST',
                                data: formData,
                                cache: false,
                                contentType: false,
                                processData: false,
                                xhr: function () {
                                    var xhr = $.ajaxSettings.xhr();

                                    xhr.upload.onprogress = function (
                                        event) {
                                        var perc = Math
                                            .round((event.loaded / event.total) * 100);
                                        $('#progressBar').text(
                                            perc + '%');
                                        $('#progressBar').css('width',
                                            perc + '%');
                                    };
                                    return xhr;
                                },

                            });
                    });
        });


    </script>
</head>

<body>
    <div class="container">
        <hr>
        <form action="http://localhost:92/upload/csv/" method="post" enctype="multipart/form-data">
            <div class="form-group">
                <label>Select File</label> <input class="form-control" type="file" name="myfile">
            </div>
            <div class="form-group">
                <button class="btn btn-primary" type="submit" disabled>Process
                    It</button>
            </div>
        </form>
        <br />

        <div class="progress">
            <div id="progressBar" class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="0"
                aria-valuemin="0" aria-valuemax="100" style="width: 0%">0%</div>

        </div>
        <h3 th:text="${message}" style="color: rgb(255, 0, 0);"></h3>
    </div>

</body>

</html>